<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PDF to JPG Converter — Storedropship</title>
  <meta name="description" content="Convert PDF pages to JPG images in the browser. Choose pages, image quality and scale. Download individual JPGs or a ZIP of all pages." />
  <meta name="keywords" content="PDF to JPG, convert pdf to jpg, pdf image export, client-side pdf conversion, pdf.js, jszip" />
  <style>
    :root{--bg:#fbfdff;--card:#fff;--muted:#6b7280;--accent:#0ea5a4}
    *{box-sizing:border-box;font-family:Inter,Segoe UI,Roboto,Arial,sans-serif}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#eef6ff);padding:18px;color:#0b1220}
    .wrap{max-width:1100px;margin:0 auto}
    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 10px 34px rgba(10,20,40,0.06);margin-bottom:14px}
    h1{margin:0 0 6px;font-size:20px}
    p.lead{margin:0 0 12px;color:var(--muted)}
    label{display:block;font-size:13px;color:#374151;margin-top:8px}
    input,select,button,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef6;font-size:14px}
    .controls{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
    button.primary{background:var(--accent);color:#fff;border:none;padding:10px;border-radius:8px;cursor:pointer}
    button.alt{background:#fff;border:1px solid #e6eef6;color:#0b5394;padding:10px;border-radius:8px}
    .row{display:grid;grid-template-columns:1fr 420px;gap:12px}
    .previewImgs{display:flex;flex-direction:column;gap:8px;max-height:420px;overflow:auto}
    img.page{width:100%;border-radius:8px;border:1px solid #e6eef6}
    pre{background:#f8fafc;padding:12px;border-radius:8px;border:1px solid #e6e9ef;overflow:auto;max-height:220px}
    .meta{font-size:13px;color:var(--muted);margin-top:8px}
    @media(max-width:900px){.row{grid-template-columns:1fr}}
  </style>
  <!-- PDF.js and JSZip -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.9.179/pdf.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>PDF to JPG Converter</h1>
      <p class="lead">Convert PDF pages into JPG images directly in your browser. Choose page range, image scale and quality. Download single images or a ZIP containing all converted pages. No server upload — files remain local.</p>

      <div class="row">
        <div>
          <label for="pdfFile">Choose PDF</label>
          <input id="pdfFile" type="file" accept="application/pdf" />

          <label for="pages">Pages (e.g. 1,3-5) — leave empty for all</label>
          <input id="pages" placeholder="1,3-5" />

          <label for="scale">Scale (1 = original, 2 = 2x resolution)</label>
          <input id="scale" type="number" value="1" min="0.25" step="0.25" />

          <label for="quality">JPEG Quality (0.1 - 1.0)</label>
          <input id="quality" type="number" value="0.8" min="0.1" max="1" step="0.05" />

          <div class="controls">
            <button id="convertBtn" class="primary">Convert to JPG</button>
            <button id="downloadAllBtn" class="alt">Download All as ZIP</button>
            <button id="clearBtn" class="alt">Clear</button>
          </div>

          <div class="meta">Tip: Increase scale for higher-resolution images (useful for detailed PDFs). Higher quality increases file size.</div>
        </div>

        <div>
          <label>Preview / Output</label>
          <div id="preview" class="previewImgs">No images yet. After conversion thumbnails will appear here.</div>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>Description</h2>
      <p style="margin:0;color:#374151;line-height:1.6">This PDF→JPG converter renders each PDF page to an HTML canvas using PDF.js, then exports the canvas as a JPEG data URL. It supports selecting pages, scaling (resolution multiplier), JPEG quality, and producing a ZIP archive for batch download using JSZip.</p>
      <ul style="margin-top:8px;color:#374151">
        <li>Client-side conversion — your files stay on your device.</li>
        <li>Adjust scale and JPEG quality to trade off resolution vs file size.</li>
        <li>Download individual JPGs or a ZIP with all pages.</li>
        <li>Limitations: scanned PDFs are rendered as images (this tool will still export JPG), very large PDFs may take time or memory.</li>
      </ul>
    </div>
  </div>

  <script>
    const pdfFile = document.getElementById('pdfFile');
    const convertBtn = document.getElementById('convertBtn');
    const downloadAllBtn = document.getElementById('downloadAllBtn');
    const clearBtn = document.getElementById('clearBtn');
    const pagesEl = document.getElementById('pages');
    const scaleEl = document.getElementById('scale');
    const qualityEl = document.getElementById('quality');
    const preview = document.getElementById('preview');

    let lastImages = []; // [{page, dataUrl, fileName}]

    function parsePagesInput(str, maxPage){
      if(!str) return null;
      const parts = str.split(',').map(s=>s.trim());
      const pages = new Set();
      parts.forEach(p => {
        if(p.includes('-')){
          const [a,b] = p.split('-').map(Number);
          if(!isNaN(a) && !isNaN(b)) for(let i=a;i<=b;i++) if(i>=1 && i<=maxPage) pages.add(i);
        } else {
          const n = Number(p); if(!isNaN(n) && n>=1 && n<=maxPage) pages.add(n);
        }
      });
      return Array.from(pages).sort((a,b)=>a-b);
    }

    async function convertPdfToJpg(arrayBuffer){
      const pdf = await pdfjsLib.getDocument({data: arrayBuffer}).promise;
      const maxPage = pdf.numPages;
      const pagesToUse = parsePagesInput(pagesEl.value, maxPage) || Array.from({length:maxPage},(_,i)=>i+1);
      const s = Math.max(0.25, parseFloat(scaleEl.value) || 1);
      const q = Math.min(1, Math.max(0.1, parseFloat(qualityEl.value) || 0.8));

      lastImages = [];
      preview.innerHTML = '';

      for(const p of pagesToUse){
        preview.appendChild(document.createTextNode(`Rendering page ${p}...`));
        const page = await pdf.getPage(p);
        const viewport = page.getViewport({scale: s});
        const canvas = document.createElement('canvas');
        canvas.width = Math.floor(viewport.width);
        canvas.height = Math.floor(viewport.height);
        const ctx = canvas.getContext('2d');
        const renderContext = { canvasContext: ctx, viewport };
        await page.render(renderContext).promise;
        const dataUrl = canvas.toDataURL('image/jpeg', q);
        const img = document.createElement('img'); img.className='page'; img.src = dataUrl;
        img.alt = `Page ${p}`;
        // file name
        const base = (pdf._pdfInfo && pdf._pdfInfo.info && pdf._pdfInfo.info.Title) ? pdf._pdfInfo.info.Title : 'page';
        const fileName = `page-${p}.jpg`;
        const wrap = document.createElement('div');
        const dl = document.createElement('button'); dl.textContent='Download'; dl.className='alt'; dl.style.marginTop='6px';
        dl.addEventListener('click', ()=>{ const a=document.createElement('a'); a.href=dataUrl; a.download=fileName; a.click(); });
        wrap.appendChild(img); wrap.appendChild(dl);
        preview.appendChild(wrap);
        lastImages.push({page:p, dataUrl, fileName});
      }
      preview.insertBefore(document.createElement('hr'), preview.firstChild);
      preview.insertBefore(document.createTextNode(`Rendered ${lastImages.length} page(s).`), preview.firstChild);
    }

    convertBtn.addEventListener('click', async ()=>{
      const file = pdfFile.files[0];
      if(!file) return alert('Select a PDF file first');
      preview.textContent = 'Reading PDF...';
      const ab = await file.arrayBuffer();
      try{
        await convertPdfToJpg(ab);
        alert('Conversion complete');
      }catch(err){ console.error(err); alert('Conversion failed: '+err.message); }
    });

    downloadAllBtn.addEventListener('click', async ()=>{
      if(!lastImages.length) return alert('No images to download. Run conversion first.');
      const zip = new JSZip();
      lastImages.forEach(img => {
        // convert dataUrl to blob
        const arr = img.dataUrl.split(',');
        const mime = arr[0].match(/:(.*?);/)[1];
        const bstr = atob(arr[1]);
        let n = bstr.length; const u8 = new Uint8Array(n);
        while(n--) u8[n] = bstr.charCodeAt(n);
        zip.file(img.fileName, u8);
      });
      const content = await zip.generateAsync({type:'blob'});
      const a = document.createElement('a'); const url = URL.createObjectURL(content);
      a.href = url; a.download = 'pdf-pages-jpg.zip'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });

    clearBtn.addEventListener('click', ()=>{ pdfFile.value=''; preview.innerHTML=''; lastImages=[]; });
  </script>
</body>
</html>
