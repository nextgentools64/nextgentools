<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Free JSON Validator & Formatter Online (Validate, Minify, Beautify)</title>
  <meta name="description" content="Free JSON Validator & Formatter tool — Paste JSON to validate, format (beautify), minify, copy or download instantly. Simple, fast & offline-ready JSON utility.">
  <meta name="keywords" content="JSON Validator, JSON Formatter, JSON Minify, JSON Beautify, JSON Tool Online, Validate JSON">
  <style>
    :root{--bg:#f6f9ff;--card:#fff;--muted:#6b7280;--accent:#0ea5a4}
    *{box-sizing:border-box;font-family:Segoe UI,Roboto,Arial,sans-serif}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#eef2ff);padding:28px;color:#111827}
    .wrap{max-width:920px;margin:0 auto}
    .card{background:var(--card);padding:18px;border-radius:10px;box-shadow:0 8px 26px rgba(8,15,52,0.06)}
    h1{margin:0 0 6px;font-size:22px}
    p.lead{margin:0 0 12px;color:var(--muted)}
    textarea{width:100%;min-height:260px;border:1px solid #e6e9ef;border-radius:8px;padding:12px;font-family:monospace;font-size:14px}
    .row{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
    button{padding:10px 12px;border-radius:8px;border:none;background:var(--accent);color:white;cursor:pointer}
    button.alt{background:#e6eef6;color:#0b5394}
    .out{margin-top:12px;padding:12px;border-radius:8px;background:#f8fafc;border:1px dashed #e5e7eb;white-space:pre-wrap;font-family:monospace}
    .small{font-size:13px;color:var(--muted);margin-top:8px}
    .char-count{font-size:12px;color:var(--muted);text-align:right;margin-top:4px}
    .tree-node{margin-left:20px;border-left:1px dashed #ddd;padding-left:10px}
    .tree-key{font-weight:bold;color:#0b5394}
    .tree-value{color:#064e3b}
    .switch{position:relative;display:inline-block;width:50px;height:24px}
    .switch input{opacity:0;width:0;height:0}
    .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s;border-radius:24px}
    .slider:before{position:absolute;content:"";height:16px;width:16px;left:4px;bottom:4px;background-color:white;transition:.4s;border-radius:50%}
    input:checked + .slider{background-color:#0ea5a4}
    input:checked + .slider:before{transform:translateX(26px)}
    @media(max-width:720px){.row{flex-direction:column}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <h1>JSON Validator & Formatter</h1>
        <div>
          <label class="switch">
            <input type="checkbox" id="darkModeToggle">
            <span class="slider"></span>
          </label>
        </div>
      </div>
      <p class="lead">Paste your JSON below — validate, format (beautify), minify, copy or download. 100% free & offline-ready JSON tool.</p>
      <label for="input">Input JSON</label>
      <textarea id="input" placeholder='{"name": "Amit", "age": 25}'></textarea>
      <div class="char-count">
        Characters: <span id="charCount">0</span> | Lines: <span id="lineCount">0</span>
      </div>
      <div class="row">
        <button id="validate">Validate JSON</button>
        <button id="format" class="alt">Format (Pretty)</button>
        <button id="minify" class="alt">Minify</button>
        <button id="copy" class="alt">Copy</button>
        <button id="download" class="alt">Download .json</button>
        <button id="history" class="alt">History</button>
        <button id="clear" class="alt">Clear</button>
      </div>
      <div style="margin-top: 12px;">
        <input type="checkbox" id="treeView"> 
        <label for="treeView">Show as tree view</label>
      </div>
      <div id="output" class="out">Result / messages will appear here.</div>
      <div class="small">Tip: Use the Format button to beautify JSON and Validator button to check for syntax errors.</div>
    </div>
    
    <div id="historyPanel" class="card" style="display: none;">
      <h3>JSON History</h3>
      <div id="historyList"></div>
      <button id="clearHistory" class="alt">Clear History</button>
    </div>
    
    <div style="height:12px"></div>
    <div class="card">
      <h2 style="font-size:18px;margin-bottom:6px">About this JSON Validator Tool</h2>
      <p style="margin:0;color:#374151;line-height:1.6">
        Ye JSON Validator aur Formatter tool aapko fast tarike se JSON validate, beautify aur minify karne ki facility deta hai.
        Iska use aap coding, web development aur API testing ke liye kar sakte hain. Ye tool offline bhi chal jata hai aur Elementor HTML block me embed bhi ho sakta hai.
      </p>
    </div>
  </div>

  <script>
    const input = document.getElementById('input');
    const output = document.getElementById('output');
    const btnValidate = document.getElementById('validate');
    const btnFormat = document.getElementById('format');
    const btnMinify = document.getElementById('minify');
    const btnCopy = document.getElementById('copy');
    const btnDownload = document.getElementById('download');
    const btnHistory = document.getElementById('history');
    const btnClear = document.getElementById('clear');
    const btnClearHistory = document.getElementById('clearHistory');
    const historyPanel = document.getElementById('historyPanel');
    const historyList = document.getElementById('historyList');
    const treeViewCheckbox = document.getElementById('treeView');
    const darkModeToggle = document.getElementById('darkModeToggle');
    const charCount = document.getElementById('charCount');
    const lineCount = document.getElementById('lineCount');
    
    // Initialize history from localStorage
    let jsonHistory = JSON.parse(localStorage.getItem('jsonHistory')) || [];
    
    // Update character and line count
    function updateCounts() {
      const text = input.value;
      charCount.textContent = text.length;
      lineCount.textContent = text.split('\n').length;
    }
    
    input.addEventListener('input', updateCounts);
    updateCounts();
    
    // Dark mode toggle
    darkModeToggle.addEventListener('change', function() {
      if (this.checked) {
        document.body.style.background = 'linear-gradient(180deg, #1a202c, #2d3748)';
        document.body.style.color = '#e2e8f0';
        document.querySelectorAll('.card').forEach(card => {
          card.style.background = '#2d3748';
          card.style.color = '#e2e8f0';
        });
        document.querySelector('textarea').style.background = '#1a202c';
        document.querySelector('textarea').style.color = '#e2e8f0';
        document.querySelector('.out').style.background = '#1a202c';
        document.querySelector('.out').style.color = '#e2e8f0';
      } else {
        document.body.style.background = 'linear-gradient(180deg,var(--bg),#eef2ff)';
        document.body.style.color = '#111827';
        document.querySelectorAll('.card').forEach(card => {
          card.style.background = 'var(--card)';
          card.style.color = '#111827';
        });
        document.querySelector('textarea').style.background = '#fff';
        document.querySelector('textarea').style.color = '#111827';
        document.querySelector('.out').style.background = '#f8fafc';
        document.querySelector('.out').style.color = '#111827';
      }
    });
    
    // Show message function
    function show(msg, ok=true){
      output.textContent = msg;
      output.style.color = ok ? '#064e3b' : '#9b1c1c';
    }
    
    // Add to history
    function addToHistory(json) {
      if (!json.trim()) return;
      
      // Avoid duplicates
      if (jsonHistory.includes(json)) return;
      
      jsonHistory.unshift(json);
      if (jsonHistory.length > 10) jsonHistory.pop(); // Keep only last 10
      
      localStorage.setItem('jsonHistory', JSON.stringify(jsonHistory));
      updateHistoryDisplay();
    }
    
    // Update history display
    function updateHistoryDisplay() {
      historyList.innerHTML = '';
      jsonHistory.forEach((json, index) => {
        const item = document.createElement('div');
        item.style.marginBottom = '8px';
        item.style.padding = '8px';
        item.style.background = '#f1f5f9';
        item.style.borderRadius = '6px';
        item.style.fontSize = '13px';
        item.style.cursor = 'pointer';
        item.textContent = json.substring(0, 50) + (json.length > 50 ? '...' : '');
        item.title = 'Click to load this JSON';
        item.addEventListener('click', () => {
          input.value = json;
          updateCounts();
          show(`Loaded from history (${index + 1})`);
        });
        historyList.appendChild(item);
      });
    }
    
    // Tree view rendering
    function renderTreeView(obj, container, depth = 0) {
      container.innerHTML = '';
      
      function createNode(key, value, depth) {
        const node = document.createElement('div');
        node.className = 'tree-node';
        node.style.marginLeft = `${depth * 20}px`;
        
        const keySpan = document.createElement('span');
        keySpan.className = 'tree-key';
        keySpan.textContent = key;
        
        const valueSpan = document.createElement('span');
        valueSpan.className = 'tree-value';
        
        if (typeof value === 'object' && value !== null) {
          valueSpan.textContent = Array.isArray(value) ? `[${value.length}]` : `{Object}`;
          node.appendChild(keySpan);
          node.appendChild(document.createTextNode(': '));
          node.appendChild(valueSpan);
          
          const childContainer = document.createElement('div');
          childContainer.style.marginLeft = '20px';
          
          if (Array.isArray(value)) {
            value.forEach((item, i) => {
              createNode(`[${i}]`, item, depth + 1);
            });
          } else {
            Object.keys(value).forEach(k => {
              createNode(k, value[k], depth + 1);
            });
          }
          
          node.appendChild(childContainer);
        } else {
          valueSpan.textContent = `: ${JSON.stringify(value)}`;
          node.appendChild(keySpan);
          node.appendChild(valueSpan);
        }
        
        container.appendChild(node);
      }
      
      if (typeof obj === 'object' && obj !== null) {
        if (Array.isArray(obj)) {
          obj.forEach((item, i) => {
            createNode(`[${i}]`, item, depth);
          });
        } else {
          Object.keys(obj).forEach(key => {
            createNode(key, obj[key], depth);
          });
        }
      } else {
        container.textContent = JSON.stringify(obj);
      }
    }
    
    // Validate JSON
    btnValidate.addEventListener('click', ()=>{
      const txt = input.value.trim();
      if(!txt){ 
        show('⚠️ Please paste JSON into the input area.', false); 
        return; 
      }
      
      addToHistory(txt);
      
      try{
        const parsed = JSON.parse(txt);
        
        if (treeViewCheckbox.checked) {
          output.innerHTML = '';
          renderTreeView(parsed, output);
        } else {
          show('✅ Valid JSON\n\n' + JSON.stringify(parsed, null, 2));
        }
      }catch(e){
        let errorMsg = e.message;
        let positionMatch = errorMsg.match(/position (\d+)/);
        
        if(positionMatch) {
          const position = parseInt(positionMatch[1]);
          const line = txt.substring(0, position).split('\n').length;
          const column = position - txt.lastIndexOf('\n', position - 1);
          errorMsg = `❌ Invalid JSON at line ${line}, column ${column}\n\n${e.message}`;
        } else {
          errorMsg = `❌ Invalid JSON\n\n${e.message}`;
        }
        
        show(errorMsg, false);
      }
    });
    
    // Format JSON
    btnFormat.addEventListener('click', ()=>{
      const txt = input.value.trim();
      if(!txt){ show('Input is empty.', false); return; }
      
      addToHistory(txt);
      
      try{
        const parsed = JSON.parse(txt);
        const pretty = JSON.stringify(parsed, null, 2);
        input.value = pretty;
        updateCounts();
        show('✅ Formatted JSON (pretty).');
      }catch(e){ 
        show('❌ Invalid JSON — cannot format.\n' + e.message, false); 
      }
    });
    
    // Minify JSON
    btnMinify.addEventListener('click', ()=>{
      const txt = input.value.trim();
      if(!txt){ show('Input is empty.', false); return; }
      
      addToHistory(txt);
      
      try{
        const parsed = JSON.parse(txt);
        const min = JSON.stringify(parsed);
        input.value = min;
        updateCounts();
        show('✅ Minified JSON.');
      }catch(e){ 
        show('❌ Invalid JSON — cannot minify.\n' + e.message, false); 
      }
    });
    
    // Copy to clipboard
    btnCopy.addEventListener('click', async ()=>{
      const txt = input.value;
      if(!txt){ show('Nothing to copy.', false); return; }
      
      try{
        await navigator.clipboard.writeText(txt);
        show('✅ Copied to clipboard');
      }catch(e){
        show('❌ Clipboard copy failed — please allow clipboard access or copy manually.', false);
      }
    });
    
    // Download JSON
    btnDownload.addEventListener('click', ()=>{
      const txt = input.value;
      if(!txt){ show('Nothing to download.', false); return; }
      
      const blob = new Blob([txt], {type: 'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; 
      a.download = 'data.json';
      document.body.appendChild(a); 
      a.click();
      a.remove(); 
      URL.revokeObjectURL(url);
      show('✅ Download started: data.json');
    });
    
    // History panel
    btnHistory.addEventListener('click', () => {
      historyPanel.style.display = historyPanel.style.display === 'none' ? 'block' : 'none';
      updateHistoryDisplay();
    });
    
    // Clear input
    btnClear.addEventListener('click', () => {
      input.value = '';
      updateCounts();
      show('Cleared.');
    });
    
    // Clear history
    btnClearHistory.addEventListener('click', () => {
      jsonHistory = [];
      localStorage.removeItem('jsonHistory');
      updateHistoryDisplay();
      show('History cleared.');
    });
    
    // Tree view toggle
    treeViewCheckbox.addEventListener('change', () => {
      if (input.value.trim()) {
        btnValidate.click();
      }
    });
  </script>
</body>
</html>