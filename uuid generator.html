<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UUID Generator — Storedropship Tool</title>
  <meta name="description" content="Generate RFC4122 UUIDs (v4) instantly. Batch generate, copy, download, format options (uppercase, braces, no-hyphens). Offline, secure, and API-ready." />
  <meta name="keywords" content="UUID generator, UUID v4, GUID, Generate UUID, Batch UUID, download UUIDs" />
  <style>
    :root{--bg:#f7fafc;--card:#fff;--muted:#6b7280;--accent:#0ea5a4}
    *{box-sizing:border-box;font-family:Inter,Segoe UI,Roboto,Arial,sans-serif}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#eef2ff);padding:20px;color:#0f172a}
    .wrap{max-width:980px;margin:0 auto}
    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 8px 30px rgba(10,20,40,0.06);margin-bottom:14px}
    h1{margin:0 0 6px;font-size:20px}
    p.lead{margin:0 0 12px;color:var(--muted)}
    .grid{display:grid;grid-template-columns:1fr 320px;gap:12px}
    input,select,button,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef6;font-size:14px}
    .controls{display:flex;gap:8px;margin-top:10px}
    button.primary{background:var(--accent);color:#fff;border:none;padding:10px;border-radius:8px;cursor:pointer}
    button.alt{background:#fff;border:1px solid #e6eef6;color:#0b5394;padding:10px;border-radius:8px}
    pre{background:#f8fafc;padding:12px;border-radius:8px;border:1px solid #e6e9ef;overflow:auto;max-height:360px}
    .meta{font-size:13px;color:var(--muted);margin-top:10px}
    label{font-size:13px;color:#374151}
    .options{display:flex;gap:8px;flex-wrap:wrap}
    .options label{display:flex;align-items:center;gap:6px}
    @media(max-width:900px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>UUID Generator</h1>
      <p class="lead">Instantly generate RFC4122-compliant UUIDs (version 4) in your browser. Supports single and batch generation, formatting options, copy, download and simple API hooks for server-side integration.</p>

      <div class="grid">
        <div>
          <label for="count">How many UUIDs?</label>
          <select id="count">
            <option value="1">1</option>
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="50">50</option>
            <option value="100">100</option>
            <option value="500">500</option>
          </select>

          <div style="margin-top:8px">
            <label>Format options</label>
            <div class="options">
              <label><input type="checkbox" id="uppercase"> Uppercase</label>
              <label><input type="checkbox" id="braces"> Surround with braces { }</label>
              <label><input type="checkbox" id="nohyphen"> Remove hyphens</label>
            </div>
          </div>

          <div style="margin-top:12px" class="controls">
            <button class="primary" id="generate">Generate</button>
            <button class="alt" id="copyAll">Copy All</button>
            <button class="alt" id="downloadBtn">Download</button>
            <button class="alt" id="clearBtn">Clear</button>
          </div>

          <div class="meta">Tip: For cryptographically secure UUIDs, this tool uses the browser's <code>crypto.getRandomValues</code>. Version 4 UUIDs are random-based.</div>
        </div>

        <div>
          <label>Generated UUIDs</label>
          <pre id="output">No UUIDs generated yet.</pre>
          <div style="margin-top:10px;display:flex;gap:8px">
            <button class="alt" id="copySelected">Copy Selected</button>
            <button class="alt" id="saveHistory">Save to History</button>
          </div>
          <div class="meta" style="margin-top:8px">You can click any UUID in the output to copy it individually. Saved history is stored in your browser (localStorage).</div>
        </div>
      </div>
    </div>

    <div class="card">
      <h2 style="margin:0 0 8px">Description</h2>
      <p style="margin:0;color:#374151;line-height:1.6">This UUID Generator creates RFC4122 v4 UUIDs (random) entirely in the browser — no server required. It's ideal for developers, testers, content managers, and anyone needing unique identifiers for databases, mock data, or client-side keys. The interface includes batch generation, formatting toggles, copy/download options, and a local history feature. If you want server-side UUIDs or other versions (v1, v5), the script includes a clear placeholder to swap in API calls.</p>
      <ul style="margin-top:8px;color:#374151">
        <li>UUID version: v4 (RFC4122) using <code>crypto.getRandomValues</code>.</li>
        <li>Batch generation (1–500), copy single/all, download as .txt.</li>
        <li>Format options: uppercase, braces, remove hyphens.</li>
        <li>History saved to localStorage with option to clear.</li>
        <li>API-ready: placeholder function <code>fetchUUIDFromServer()</code> to integrate remote generators.</li>
      </ul>
    </div>
  </div>

  <script>
    // RFC4122 v4 generator using crypto.getRandomValues
    function uuidv4(){
      const r = new Uint8Array(16);
      crypto.getRandomValues(r);
      // Per RFC4122: set version and variant bits
      r[6] = (r[6] & 0x0f) | 0x40; // version 4
      r[8] = (r[8] & 0x3f) | 0x80; // variant RFC4122
      const hex = Array.from(r).map(b => b.toString(16).padStart(2,'0')).join('');
      return `${hex.substr(0,8)}-${hex.substr(8,4)}-${hex.substr(12,4)}-${hex.substr(16,4)}-${hex.substr(20,12)}`;
    }

    const output = document.getElementById('output');
    const generateBtn = document.getElementById('generate');
    const copyAllBtn = document.getElementById('copyAll');
    const countEl = document.getElementById('count');
    const uppercaseEl = document.getElementById('uppercase');
    const bracesEl = document.getElementById('braces');
    const nohyphenEl = document.getElementById('nohyphen');
    const downloadBtn = document.getElementById('downloadBtn');
    const clearBtn = document.getElementById('clearBtn');
    const copySelected = document.getElementById('copySelected');
    const saveHistory = document.getElementById('saveHistory');

    function formatUUID(u){
      let out = u;
      if(nohyphenEl.checked) out = out.replace(/-/g,'');
      if(uppercaseEl.checked) out = out.toUpperCase();
      if(bracesEl.checked) out = '{' + out + '}';
      return out;
    }

    function generateMany(n){
      const arr = [];
      for(let i=0;i<n;i++) arr.push(uuidv4());
      return arr;
    }

    generateBtn.addEventListener('click', ()=>{
      const n = parseInt(countEl.value,10) || 1;
      output.textContent = '';
      const uuids = generateMany(n);
      output.textContent = uuids.map(formatUUID).join('\n');
    });

    // click to copy single line
    output.addEventListener('click', (e)=>{
      const sel = window.getSelection();
      const text = sel.toString().trim();
      if(text){ navigator.clipboard.writeText(text).then(()=>alert('Copied: '+text)); return; }
      // otherwise try to copy the clicked line
      const clicked = e.target.innerText || e.target.textContent;
      // not ideal: copy full content
      navigator.clipboard.writeText(output.textContent).then(()=>alert('All UUIDs copied'));
    });

    copyAllBtn.addEventListener('click', async ()=>{
      try{ await navigator.clipboard.writeText(output.textContent); alert('All UUIDs copied'); }catch(e){ alert('Copy failed — allow clipboard access'); }
    });

    copySelected.addEventListener('click', async ()=>{
      const sel = window.getSelection().toString().trim();
      if(!sel){ alert('Select one or more UUIDs in the output to copy.'); return; }
      try{ await navigator.clipboard.writeText(sel); alert('Copied selection'); }catch(e){ alert('Copy failed — allow clipboard access'); }
    });

    downloadBtn.addEventListener('click', ()=>{
      const text = output.textContent || '';
      if(!text){ alert('No UUIDs to download'); return; }
      const blob = new Blob([text], {type:'text/plain'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'uuids.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });

    clearBtn.addEventListener('click', ()=>{ if(confirm('Clear generated UUIDs?')) output.textContent=''; });

    // History (localStorage)
    const HIST_KEY = 'storedropship_uuid_history_v1';
    function saveToHistory(){
      const text = output.textContent.trim(); if(!text) { alert('Nothing to save'); return; }
      const list = text.split('\n');
      const stored = JSON.parse(localStorage.getItem(HIST_KEY) || '[]');
      const merged = stored.concat(list).slice(-5000); // keep last 5000
      localStorage.setItem(HIST_KEY, JSON.stringify(merged));
      alert('Saved '+list.length+' UUID(s) to history');
    }
    saveHistory.addEventListener('click', saveToHistory);

    // Placeholder for server-side UUID fetch (example)
    async function fetchUUIDFromServer(n=1){
      // Example: call your server which returns JSON array of uuids
      // return fetch('/api/generate-uuids?count='+n).then(r=>r.json());
      return null;
    }

    // Init sample
    output.textContent = 'Click "Generate" to create UUIDs.';
  </script>
</body>
</html>
