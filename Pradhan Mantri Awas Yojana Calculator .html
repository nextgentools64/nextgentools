<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pradhan Mantri Awas Yojana Calculator - India</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Poppins', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        .input-group {
            transition: all 0.3s ease;
        }
        .input-group:hover {
            transform: translateY(-2px);
        }
        .result-highlight {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.8; }
            100% { opacity: 1; }
        }
        .lang-selector {
            position: relative;
        }
        .lang-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 100;
            min-width: 150px;
            display: none;
        }
        .lang-dropdown.show {
            display: block;
        }
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="gradient-bg text-white py-6">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-home text-3xl"></i>
                    <h1 class="text-2xl md:text-3xl font-bold" data-i18n="header.title">Pradhan Mantri Awas Yojana Calculator</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-sm md:text-base">
                        <i class="fas fa-flag mr-2"></i><span data-i18n="header.country">India</span>
                    </div>
                    <div class="lang-selector">
                        <button id="langButton" class="flex items-center space-x-2 bg-white bg-opacity-20 hover:bg-opacity-30 px-3 py-1 rounded-lg transition">
                            <i class="fas fa-globe"></i>
                            <span id="currentLang">EN</span>
                            <i class="fas fa-chevron-down text-xs"></i>
                        </button>
                        <div id="langDropdown" class="lang-dropdown">
                            <a href="#" class="block px-4 py-2 hover:bg-gray-100" data-lang="en">English</a>
                            <a href="#" class="block px-4 py-2 hover:bg-gray-100" data-lang="hi">हिन्दी</a>
                            <a href="#" class="block px-4 py-2 hover:bg-gray-100" data-lang="bn">বাংলা</a>
                            <a href="#" class="block px-4 py-2 hover:bg-gray-100" data-lang="ta">தமிழ்</a>
                            <a href="#" class="block px-4 py-2 hover:bg-gray-100" data-lang="te">తెలుగు</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- PMAY Details Section -->
        <section class="mb-8">
            <div class="bg-white rounded-lg card-shadow p-6">
                <h2 class="text-xl font-semibold mb-6 flex items-center">
                    <i class="fas fa-building mr-3 text-purple-600"></i>
                    <span data-i18n="pmay.title">Pradhan Mantri Awas Yojana Details</span>
                </h2>
                
                <div class="grid md:grid-cols-3 gap-6">
                    <!-- House Cost -->
                    <div class="input-group">
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-rupee-sign mr-2"></i><span data-i18n="pmay.houseCost">Total House Cost (₹)</span>
                        </label>
                        <input type="number" id="houseCost" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="4000000" value="4000000">
                    </div>

                    <!-- Income Category -->
                    <div class="input-group">
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-users mr-2"></i><span data-i18n="pmay.incomeCategory">Income Category</span>
                        </label>
                        <select id="incomeCategory" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option value="EWS" data-i18n="pmay.ews">EWS (Up to ₹3 Lakh)</option>
                            <option value="LIG" data-i18n="pmay.lig">LIG (₹3-6 Lakh)</option>
                            <option value="MIG-I" data-i18n="pmay.mig1">MIG-I (₹6-12 Lakh)</option>
                            <option value="MIG-II" data-i18n="pmay.mig2">MIG-II (₹12-18 Lakh)</option>
                        </select>
                    </div>

                    <!-- Area of House -->
                    <div class="input-group">
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-ruler-combined mr-2"></i><span data-i18n="pmay.area">Area of House (sq.ft.)</span>
                        </label>
                        <input type="number" id="area" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="1000" value="1000">
                    </div>
                </div>

                <!-- Calculate Button -->
                <div class="text-center mt-6">
                    <button onclick="calculatePMAY()" class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-8 py-3 rounded-lg font-semibold text-lg hover:from-purple-700 hover:to-indigo-700 transform transition hover:scale-105 shadow-lg">
                        <i class="fas fa-calculator mr-2"></i><span data-i18n="calculateBtn">Calculate PMAY</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section id="resultsSection" class="hidden mb-8">
            <div class="grid md:grid-cols-2 gap-6">
                <!-- PMAY Results -->
                <div class="bg-white rounded-lg card-shadow p-6">
                    <h3 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-calculator mr-3 text-purple-600"></i>
                        <span data-i18n="results.title">Subsidy Details</span>
                    </h3>
                    <div class="space-y-4">
                        <div class="flex justify-between py-2 border-b">
                            <span class="text-gray-600"><span data-i18n="results.houseCost">Total House Cost</span>:</span>
                            <span class="font-semibold" id="houseCostResult">₹0</span>
                        </div>
                        <div class="flex justify-between py-2 border-b">
                            <span class="text-gray-600"><span data-i18n="results.category">Income Category</span>:</span>
                            <span class="font-semibold" id="categoryResult">-</span>
                        </div>
                        <div class="flex justify-between py-2 border-b">
                            <span class="text-gray-600"><span data-i18n="results.subsidyRate">Subsidy Rate</span>:</span>
                            <span class="font-semibold" id="subsidyRateResult">0%</span>
                        </div>
                        <div class="flex justify-between py-2 border-b">
                            <span class="text-gray-600"><span data-i18n="results.maxSubsidy">Max Subsidy Amount</span>:</span>
                            <span class="font-semibold" id="maxSubsidyResult">₹0</span>
                        </div>
                        <div class="flex justify-between py-2 border-b">
                            <span class="text-gray-600"><span data-i18n="results.eligibleSubsidy">Eligible Subsidy</span>:</span>
                            <span class="font-semibold text-lg" id="eligibleSubsidyResult">₹0</span>
                        </div>
                        <div class="flex justify-between py-2 border-b">
                            <span class="text-gray-600"><span data-i18n="results.netAmount">Net Amount to Pay</span>:</span>
                            <span class="font-semibold" id="netAmountResult">₹0</span>
                        </div>
                    </div>
                </div>

                <!-- Subsidy Chart -->
                <div class="bg-white rounded-lg card-shadow p-6">
                    <h3 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-chart-pie mr-3 text-purple-600"></i>
                        <span data-i18n="chart.title">Cost Breakdown</span>
                    </h3>
                    <div class="chart-container">
                        <canvas id="pmayChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Eligibility Criteria -->
        <section id="eligibilitySection" class="hidden">
            <div class="bg-white rounded-lg card-shadow p-6">
                <h3 class="text-xl font-semibold mb-4 flex items-center">
                    <i class="fas fa-check-circle mr-3 text-green-600"></i>
                    <span data-i18n="eligibility.title">Eligibility Criteria</span>
                </h3>
                <div id="eligibilityContent" class="space-y-3">
                    <!-- Eligibility content will be populated here -->
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p class="text-sm">
                <i class="fas fa-info-circle mr-2"></i>
                <span data-i18n="footer.note">Note: This calculator provides only estimated calculations. PMAY scheme details may change as per government notifications.</span>
            </p>
        </div>
    </footer>

    <script>
        // Translations for different languages
        const translations = {
            en: {
                "header.title": "Pradhan Mantri Awas Yojana Calculator",
                "header.country": "India",
                "pmay.title": "Pradhan Mantri Awas Yojana Details",
                "pmay.houseCost": "Total House Cost (₹)",
                "pmay.incomeCategory": "Income Category",
                "pmay.area": "Area of House (sq.ft.)",
                "pmay.ews": "EWS (Up to ₹3 Lakh)",
                "pmay.lig": "LIG (₹3-6 Lakh)",
                "pmay.mig1": "MIG-I (₹6-12 Lakh)",
                "pmay.mig2": "MIG-II (₹12-18 Lakh)",
                "calculateBtn": "Calculate PMAY",
                "results.title": "Subsidy Details",
                "results.houseCost": "Total House Cost",
                "results.category": "Income Category",
                "results.subsidyRate": "Subsidy Rate",
                "results.maxSubsidy": "Max Subsidy Amount",
                "results.eligibleSubsidy": "Eligible Subsidy",
                "results.netAmount": "Net Amount to Pay",
                "chart.title": "Cost Breakdown",
                "eligibility.title": "Eligibility Criteria",
                "eligibility.ews": "EWS/LIG: Maximum 30 sq.m. carpet area",
                "eligibility.mig1": "MIG-I: Maximum 160 sq.m. carpet area",
                "eligibility.mig2": "MIG-II: Maximum 200 sq.m. carpet area",
                "eligibility.family": "Family should not own a pucca house",
                "eligibility.loan": "Home loan required from eligible institutions",
                "footer.note": "Note: This calculator provides only estimated calculations. PMAY scheme details may change as per government notifications."
            },
            hi: {
                "header.title": "प्रधानमंत्री आवास योजना कैलकुलेटर",
                "header.country": "भारत",
                "pmay.title": "प्रधानमंत्री आवास योजना विवरण",
                "pmay.houseCost": "कुल घर की लागत (₹)",
                "pmay.incomeCategory": "आय श्रेणी",
                "pmay.area": "घर का क्षेत्रफल (वर्ग फीट)",
                "pmay.ews": "ईडब्ल्यूएस (₹3 लाख तक)",
                "pmay.lig": "एलआईजी (₹3-6 लाख)",
                "pmay.mig1": "एमआईजी-I (₹6-12 लाख)",
                "pmay.mig2": "एमआईजी-II (₹12-18 लाख)",
                "calculateBtn": "पीएमएवाई कैलकुलेट करें",
                "results.title": "सब्सिडी विवरण",
                "results.houseCost": "कुल घर की लागत",
                "results.category": "आय श्रेणी",
                "results.subsidyRate": "सब्सिडी दर",
                "results.maxSubsidy": "अधिकतम सब्सिडी राशि",
                "results.eligibleSubsidy": "पात्र सब्सिडी",
                "results.netAmount": "भुगतान की शुद्ध राशि",
                "chart.title": "लागत विभाजन",
                "eligibility.title": "पात्रता मानदंड",
                "eligibility.ews": "ईडब्ल्यूएस/एलआईजी: अधिकतम 30 वर्ग मीटर कालीन क्षेत्र",
                "eligibility.mig1": "एमआईजी-I: अधिकतम 160 वर्ग मीटर कालीन क्षेत्र",
                "eligibility.mig2": "एमआईजी-II: अधिकतम 200 वर्ग मीटर कालीन क्षेत्र",
                "eligibility.family": "परिवार के पास पक्का घर नहीं होना चाहिए",
                "eligibility.loan": "पात्र संस्थाओं से होम लोन की आवश्यकता",
                "footer.note": "नोट: यह कैलकुलेटर केवल अनुमानित गणना प्रदान करता है। पीएमएवाई योजना विवरण सरकारी अधिसूचनाओं के अनुसार बदल सकते हैं।"
            },
            bn: {
                "header.title": "প্রধানমন্ত্রী আবাস যোজনা ক্যালকুলেটর",
                "header.country": "ভারত",
                "pmay.title": "প্রধানমন্ত্রী আবাস যোজনার বিবরণ",
                "pmay.houseCost": "মোট বাড়ির খরচ (₹)",
                "pmay.incomeCategory": "আয় শ্রেণী",
                "pmay.area": "বাড়ির এলাকা (বর্গফুট)",
                "pmay.ews": "ইডব্লিউএস (₹3 লাখ পর্যন্ত)",
                "pmay.lig": "এলআইজি (₹3-6 লাখ)",
                "pmay.mig1": "এমআইজি-I (₹6-12 লাখ)",
                "pmay.mig2": "এমআইজি-II (₹12-18 লাখ)",
                "calculateBtn": "পিএমএওয়াই গণনা করুন",
                "results.title": "ভর্তুকির বিবরণ",
                "results.houseCost": "মোট বাড়ির খরচ",
                "results.category": "আয় শ্রেণী",
                "results.subsidyRate": "ভর্তুকির হার",
                "results.maxSubsidy": "সর্বোচ্চ ভর্তুকির পরিমাণ",
                "results.eligibleSubsidy": "যোগ্য ভর্তুকি",
                "results.netAmount": "নেট পরিমাণ পরিশোধ",
                "chart.title": "খরচ ব্রেকআপ",
                "eligibility.title": "যোগ্যতার মানদণ্ড",
                "eligibility.ews": "ইডব্লিউএস/এলআইজি: সর্বোচ্চ 30 বর্গমিটার কার্পেট এলাকা",
                "eligibility.mig1": "এমআইজি-I: সর্বোচ্চ 160 বর্গমিটার কার্পেট এলাকা",
                "eligibility.mig2": "এমআইজি-II: সর্বোচ্চ 200 বর্গমিটার কার্পেট এলাকা",
                "eligibility.family": "পরিবারের একটি পাকা বাড়ি থাকা উচিত নয়",
                "eligibility.loan": "যোগ্য প্রতিষ্ঠান থেকে হোম লোন প্রয়োজন",
                "footer.note": "নোট: এই ক্যালকুলেটর শুধুমাত্র আনুমানিক গণনা প্রদান করে। পিএমএওয়াই স্কিমের বিবরণ সরকারি বিজ্ঞপ্তি অনুযায়ী পরিবর্তিত হতে পারে।"
            },
            ta: {
                "header.title": "பிரதம மந்திரி ஆவாஸ் யோஜனை கணக்கீடு",
                "header.country": "இந்தியா",
                "pmay.title": "பிரதம மந்திரி ஆவாஸ் யோஜனை விவரங்கள்",
                "pmay.houseCost": "மொத்த வீட்டு செலவு (₹)",
                "pmay.incomeCategory": "வருமான வகை",
                "pmay.area": "வீட்டின் பரப்பளவு (ச.அடி)",
                "pmay.ews": "இடபிள்யூஎஸ் (₹3 லட்சம் வரை)",
                "pmay.lig": "எல்ஐஜி (₹3-6 லட்சம்)",
                "pmay.mig1": "எம்ஐஜி-I (₹6-12 லட்சம்)",
                "pmay.mig2": "எம்ஐஜி-II (₹12-18 லட்சம்)",
                "calculateBtn": "பிஎம்ஏஒய் கணக்கிடுங்கள்",
                "results.title": "மானியம் விவரங்கள்",
                "results.houseCost": "மொத்த வீட்டு செலவு",
                "results.category": "வருமான வகை",
                "results.subsidyRate": "மானிய விகிதம்",
                "results.maxSubsidy": "அதிகபட்ச மானிய தொகை",
                "results.eligibleSubsidy": "தகுதியான மானியம்",
                "results.netAmount": "செலுத்த வேண்டிய நிகர தொகை",
                "chart.title": "செலவு பிரிப்பு",
                "eligibility.title": "தகுதி விதிமுறைகள்",
                "eligibility.ews": "இடபிள்யூஎஸ்/எல்ஐஜி: அதிகபட்சம் 30 ச.மீ. தரைவிரிப்பு பரப்பளவு",
                "eligibility.mig1": "எம்ஐஜி-I: அதிகபட்சம் 160 ச.மீ. தரைவிரிப்பு பரப்பளவு",
                "eligibility.mig2": "எம்ஐஜி-II: அதிகபட்சம் 200 ச.மீ. தரைவிரிப்பு பரப்பளவு",
                "eligibility.family": "குடும்பிற்கு ஒரு பக்கா வீடு இருக்கக்கூடாது",
                "eligibility.loan": "தகுதியான நிறுவனங்களிடமிருந்து வீட்டு கடன் தேவை",
                "footer.note": "குறிப்பு: இந்த கணக்கீடு மட்டுமே மதிப்பீட்டு கணக்கீடுகளை வழங்குகிறது. பிஎம்ஏஒய் திட்ட விவரங்கள் அரசு அறிவிப்புகளின்படி மாறலாம்."
            },
            te: {
                "header.title": "ప్రధానమంత్రి ఆవాస్ యోజన క్యాలిక్యులేటర్",
                "header.country": "భారతదేశం",
                "pmay.title": "ప్రధానమంత్రి ఆవాస్ యోజన వివరాలు",
                "pmay.houseCost": "మొత్తం ఇంటి ఖర్చు (₹)",
                "pmay.incomeCategory": "ఆదాయ వర్గం",
                "pmay.area": "ఇంటి వైశాల్యం (చ.అడుగులు)",
                "pmay.ews": "ఇడబ్ల్యూఎస్ (₹3 లక్షల వరకు)",
                "pmay.lig": "ఎల్ఐజీ (₹3-6 లక్షలు)",
                "pmay.mig1": "ఎంఐజీ-I (₹6-12 లక్షలు)",
                "pmay.mig2": "ఎంఐజీ-II (₹12-18 లక్షలు)",
                "calculateBtn": "పీఎంఏవై లెక్కించండి",
                "results.title": "సబ్సిడీ వివరాలు",
                "results.houseCost": "మొత్తం ఇంటి ఖర్చు",
                "results.category": "ఆదాయ వర్గం",
                "results.subsidyRate": "సబ్సిడీ రేటు",
                "results.maxSubsidy": "గరిష్ఠ సబ్సిడీ మొత్తం",
                "results.eligibleSubsidy": "అర్హత సబ్సిడీ",
                "results.netAmount": "చెల్లాల్సిన నికర మొత్తం",
                "chart.title": "ఖర్చు విభజన",
                "eligibility.title": "అర్హతా ప్రమాణాలు",
                "eligibility.ews": "ఇడబ్ల్యూఎస్/ఎల్ఐజీ: గరిష్ఠం 30 చ.మీ. కార్పెట్ వైశాల్యం",
                "eligibility.mig1": "ఎంఐజీ-I: గరిష్ఠం 160 చ.మీ. కార్పెట్ వైశాల్యం",
                "eligibility.mig2": "ఎంఐజీ-II: గరిష్ఠం 200 చ.మీ. కార్పెట్ వైశాల్యం",
                "eligibility.family": "కుటుంబానికి పక్కా ఇల్లు ఉండకూడదు",
                "eligibility.loan": "అర్హత సంస్థల నుండి హోమ్ లోన్ అవసరం",
                "footer.note": "గమనిక: ఈ క్యాలిక్యులేటర్ అంచనా లెక్కలను మాత్రమే అందిస్తుంది. పీఎంఏవై పథక వివరాలు ప్రభుత్వ నోటిఫికేషన్ల ప్రకారం మారవచ్చు."
            }
        };

        // Current language
        let currentLanguage = 'en';

        // Language selector functionality
        document.getElementById('langButton').addEventListener('click', function() {
            document.getElementById('langDropdown').classList.toggle('show');
        });

        // Close dropdown when clicking outside
        window.addEventListener('click', function(event) {
            if (!event.target.matches('#langButton') && !event.target.closest('#langButton')) {
                document.getElementById('langDropdown').classList.remove('show');
            }
        });

        // Language selection
        document.querySelectorAll('#langDropdown a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const lang = this.getAttribute('data-lang');
                setLanguage(lang);
                document.getElementById('langDropdown').classList.remove('show');
            });
        });

        // Function to set language
        function setLanguage(lang) {
            currentLanguage = lang;
            document.getElementById('currentLang').textContent = lang.toUpperCase();
            
            // Update all elements with data-i18n attribute
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });

            // Update select options
            document.querySelectorAll('option[data-i18n]').forEach(option => {
                const key = option.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    option.textContent = translations[lang][key];
                }
            });

            // Store language preference
            localStorage.setItem('preferredLanguage', lang);
        }

        // Load saved language preference
        window.addEventListener('DOMContentLoaded', function() {
            const savedLang = localStorage.getItem('preferredLanguage');
            if (savedLang && translations[savedLang]) {
                setLanguage(savedLang);
            }
        });

        // PMAY Calculation
        let pmayChart = null;

        function calculatePMAY() {
            // Get input values
            const houseCost = parseFloat(document.getElementById('houseCost').value) || 0;
            const incomeCategory = document.getElementById('incomeCategory').value;
            const area = parseFloat(document.getElementById('area').value) || 0;

            // PMAY subsidy details
            const subsidyDetails = {
                'EWS': { rate: 6.5, maxAmount: 260000, maxArea: 30 },
                'LIG': { rate: 6.5, maxAmount: 260000, maxArea: 30 },
                'MIG-I': { rate: 4, maxAmount: 235000, maxArea: 160 },
                'MIG-II': { rate: 3, maxAmount: 235000, maxArea: 200 }
            };

            // Get subsidy details for selected category
            const subsidy = subsidyDetails[incomeCategory];

            // Convert area from sq.ft. to sq.m.
            const areaSqM = area * 0.092903;

            // Check area eligibility
            const isAreaEligible = areaSqM <= subsidy.maxArea;

            // Calculate eligible subsidy amount
            let eligibleSubsidy = 0;
            if (isAreaEligible) {
                // Subsidy is calculated on loan amount (assumed 90% of house cost)
                const loanAmount = houseCost * 0.9;
                const calculatedSubsidy = (loanAmount * subsidy.rate / 100) * 20; // 20 years tenure
                eligibleSubsidy = Math.min(calculatedSubsidy, subsidy.maxAmount);
            }

            // Calculate net amount
            const netAmount = houseCost - eligibleSubsidy;

            // Display results
            document.getElementById('houseCostResult').textContent = formatCurrency(houseCost);
            document.getElementById('categoryResult').textContent = incomeCategory;
            document.getElementById('subsidyRateResult').textContent = `${subsidy.rate}%`;
            document.getElementById('maxSubsidyResult').textContent = formatCurrency(subsidy.maxAmount);
            document.getElementById('eligibleSubsidyResult').textContent = formatCurrency(eligibleSubsidy);
            document.getElementById('netAmountResult').textContent = formatCurrency(netAmount);

            // Show results section
            document.getElementById('resultsSection').classList.remove('hidden');

            // Create cost breakdown chart
            createCostChart(houseCost, eligibleSubsidy);

            // Show eligibility criteria
            showEligibilityCriteria(incomeCategory, isAreaEligible);
        }

        function createCostChart(houseCost, subsidy) {
            const ctx = document.getElementById('pmayChart').getContext('2d');
            
            // Destroy existing chart if it exists
            if (pmayChart) {
                pmayChart.destroy();
            }

            // Create new chart
            pmayChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Subsidy Amount', 'Amount to Pay'],
                    datasets: [{
                        data: [subsidy, houseCost - subsidy],
                        backgroundColor: [
                            'rgba(102, 126, 234, 0.8)',
                            'rgba(118, 75, 162, 0.8)'
                        ],
                        borderColor: [
                            'rgba(102, 126, 234, 1)',
                            'rgba(118, 75, 162, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = formatCurrency(context.raw);
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((context.raw / total) * 100);
                                    return `${label}: ${value} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }

        function showEligibilityCriteria(category, isAreaEligible) {
            const eligibilityContent = document.getElementById('eligibilityContent');
            const t = translations[currentLanguage] || translations.en;

            let criteria = `
                <div class="flex items-start space-x-2">
                    <i class="fas fa-check-circle text-green-500 mt-1"></i>
                    <span>${t['eligibility.' + category.toLowerCase()]}</span>
                </div>
                <div class="flex items-start space-x-2">
                    <i class="fas fa-check-circle text-green-500 mt-1"></i>
                    <span>${t['eligibility.family']}</span>
                </div>
                <div class="flex items-start space-x-2">
                    <i class="fas fa-check-circle text-green-500 mt-1"></i>
                    <span>${t['eligibility.loan']}</span>
                </div>
            `;

            if (!isAreaEligible) {
                criteria = `
                    <div class="flex items-start space-x-2">
                        <i class="fas fa-times-circle text-red-500 mt-1"></i>
                        <span class="text-red-600">Area exceeds maximum limit for ${category} category</span>
                    </div>
                `;
            }

            eligibilityContent.innerHTML = criteria;

            // Show eligibility section
            document.getElementById('eligibilitySection').classList.remove('hidden');
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: 'INR',
                maximumFractionDigits: 0
            }).format(amount);
        }

        // Add input validation
        document.querySelectorAll('input[type="number"]').forEach(input => {
            input.addEventListener('input', function() {
                if (this.value < 0) this.value = 0;
            });
        });
    </script>
</body>
</html>