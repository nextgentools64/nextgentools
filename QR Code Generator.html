<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simple QR Code Generator</title>
  <style>
    :root{--card-bg:#ffffff;--accent:#0b5fff}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;margin:0;padding:24px;background:#f4f6fb;color:#111}
    .container{max-width:920px;margin:0 auto;background:var(--card-bg);padding:20px;border-radius:12px;box-shadow:0 6px 20px rgba(12,20,40,0.06)}
    h1{margin:0 0 10px;font-size:20px}
    .grid{display:grid;grid-template-columns:1fr 300px;gap:18px}
    label{display:block;font-size:13px;margin-bottom:6px}
    input[type=text],textarea,select{width:100%;padding:10px;border:1px solid #d7dbe6;border-radius:8px;font-size:14px}
    textarea{min-height:96px;resize:vertical}
    .row{display:flex;gap:8px;align-items:center}
    .controls{display:flex;flex-direction:column;gap:12px}
    .preview{display:flex;flex-direction:column;align-items:center;justify-content:center;border:1px dashed #e3e6ef;border-radius:8px;padding:14px;background:#fbfdff}
    .btn{display:inline-block;padding:10px 14px;border-radius:8px;border:0;background:var(--accent);color:#fff;font-weight:600;cursor:pointer}
    .secondary{background:#eef2ff;color:#0845d9}
    .small{font-size:13px;padding:8px 10px}
    .muted{font-size:13px;color:#6b7280}
    .meta{display:flex;gap:8px;flex-wrap:wrap}
    .field{display:flex;flex-direction:column}
    .foot{margin-top:14px;font-size:13px;color:#42526e}
    @media (max-width:820px){.grid{grid-template-columns:1fr;}.container{padding:16px}}
  </style>
</head>
<body>
  <div class="container">
    <h1>QR Code Generator</h1>
    <p class="muted">Type text, URL or any data below. Adjust size, colors and error correction. Click <strong>Generate</strong> then download the PNG.</p>

    <div class="grid" role="region" aria-label="QR generator">
      <div>
        <div class="controls">
          <div class="field">
            <label for="data">Text / URL</label>
            <textarea id="data" placeholder="https://example.com or some text">https://storedropship.in</textarea>
          </div>

          <div class="row">
            <div style="flex:1">
              <label for="size">Size: <span id="sizeVal">300</span> px</label>
              <input id="size" type="range" min="100" max="1200" value="300" oninput="document.getElementById('sizeVal').innerText=this.value">
            </div>
            <div style="width:110px">
              <label for="ecc">Error Correction</label>
              <select id="ecc">
                <option value="L">L - Low (7%)</option>
                <option value="M" selected>M - Medium (15%)</option>
                <option value="Q">Q - Quartile (25%)</option>
                <option value="H">H - High (30%)</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div style="flex:1">
              <label for="fg">Foreground color</label>
              <input id="fg" type="color" value="#000000">
            </div>
            <div style="width:150px">
              <label for="bg">Background color</label>
              <input id="bg" type="color" value="#ffffff">
            </div>
          </div>

          <div class="row">
            <button class="btn" id="generate">Generate</button>
            <button class="btn secondary" id="clear">Clear</button>
            <button class="btn small" id="example">Use Example</button>
          </div>

          <div class="meta">
            <button class="btn small" id="download" disabled>Download PNG</button>
            <button class="btn small secondary" id="copyLink" disabled>Copy Image URL</button>
            <span class="muted" id="status">Ready</span>
          </div>

          <p class="foot">This generator uses a public QR image API (api.qrserver.com) to create PNGs quickly without any external libraries. Works offline only for the UI — generating images requires internet.</p>
        </div>
      </div>

      <div>
        <div class="preview">
          <div id="previewWrap" aria-live="polite">
            <img id="qrImg" alt="QR code preview" style="max-width:100%;height:auto;display:block;" src="" />
          </div>
          <div style="margin-top:10px;text-align:center">
            <div class="muted">Preview</div>
            <div id="details" class="muted"></div>
          </div>
        </div>
      </div>
    </div>
  </div>


    <!-- FAQ section -->
    <section id="faq" style="margin-top:20px;padding:18px;border-radius:10px;background:#ffffff;border:1px solid #eef2f8">
      <h2 style="margin-top:0;font-size:18px">FAQs (सवाल और जवाब)</h2>

      <div style="margin-top:12px">
        <details open>
          <summary style="font-weight:700;cursor:pointer">QR कोड क्या है?</summary>
          <div style="margin-top:8px;color:#334155">QR (Quick Response) एक दो-आयामी बारकोड है जो टेक्स्ट, URL या अन्य डेटा को एन्कोड करता है। स्मार्टफोन कैमरा या QR स्कैनर से यह तुरंत पढ़ा जा सकता है।</div>
        </details>

        <details style="margin-top:8px">
          <summary style="font-weight:700;cursor:pointer">कैसे उपयोग करें?</summary>
          <div style="margin-top:8px;color:#334155">टेक्स्ट/URL बॉक्स में अपनी सामग्री डालें → साइज, रंग और Error Correction चुनें → <strong>Generate</strong> पर क्लिक करें → Preview दिखेगा → <strong>Download PNG</strong> से इमेज सेव करें।</div>
        </details>

        <details style="margin-top:8px">
          <summary style="font-weight:700;cursor:pointer">Error Correction क्या है और किसे चुनें?</summary>
          <div style="margin-top:8px;color:#334155">Error Correction (L, M, Q, H) QR कोड को damage या धब्बे होने पर भी पढ़ने योग्य बनाए रखने में मदद करता है। सामान्य उपयोग के लिए <em>M</em> ठीक है; अगर आपका कोड छोटे-छोटे दाग या लोगो से ओवरले होगा तो <em>Q</em> या <em>H</em> चुनें।</div>
        </details>

        <details style="margin-top:8px">
          <summary style="font-weight:700;cursor:pointer">क्या मैं रंग बदलकर उपयोग कर सकता हूँ?</summary>
          <div style="margin-top:8px;color:#334155">हां — foreground और background रंग बदल सकते हैं। ध्यान रखें कि contrast अच्छा होना चाहिए (उदाहरण: काले fg और सफेद bg) ताकि स्कैनिंग में परेशानी न हो।</div>
        </details>

        <details style="margin-top:8px">
          <summary style="font-weight:700;cursor:pointer">क्या यह ऑफ़लाइन काम करेगा?</summary>
          <div style="margin-top:8px;color:#334155">इस UI को ऑफ़लाइन खोलना संभव है, लेकिन इमेज बनाने के लिए यह पब्लिक API (api.qrserver.com) का उपयोग करता है — इसलिए PNG जनरेट करने के लिए इंटरनेट चाहिए। मैं ऑफ़लाइन SVG/Canvas जनरेशन जोड़ सकता/सकती हूँ यदि आप चाहें।</div>
        </details>

        <details style="margin-top:8px">
          <summary style="font-weight:700;cursor:pointer">क्या मेरी जानकारी सुरक्षित रहती है?</summary>
          <div style="margin-top:8px;color:#334155">यह टूल API के माध्यम से इमेज बनाता है; API को भेजा गया टेक्स्ट QR इमेज बनाते समय सर्वर पर प्रोसेस हो सकता है। संवेदनशील डेटा (जैसे पासवर्ड, OTP) QR में न डालें जब तक आप API की प्राइवेसी पॉलिसी नहीं पढ़ लें।</div>
        </details>
      </div>
    </section>

  <script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "QR कोड क्या है?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "QR (Quick Response) एक दो-आयामी बारकोड है जो टेक्स्ट, URL या अन्य डेटा को एन्कोड करता है।"
      }
    },
    {
      "@type": "Question",
      "name": "कैसे उपयोग करें?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "टेक्स्ट/URL बॉक्स में सामग्री डालें, साइज व रंग चुनें, Generate पर क्लिक करें और फिर Download PNG करें।"
      }
    },
    {
      "@type": "Question",
      "name": "Error Correction क्या है और किसे चुनें?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Error Correction QR कोड को damage होने पर भी पढ़ने योग्य रखने में मदद करता है। सामान्य उपयोग के लिए M अच्छा है; लोगो/ओवरले के लिए Q या H चुनें।"
      }
    },
    {
      "@type": "Question",
      "name": "क्या मैं रंग बदलकर उपयोग कर सकता हूँ?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "हाँ — foreground और background रंग बदले जा सकते हैं, पर contrast अच्छा रखें ताकि स्कैनिंग में दिक्कत न हो।"
      }
    },
    {
      "@type": "Question",
      "name": "क्या यह ऑफ़लाइन काम करेगा?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "UI ऑफ़लाइन खोल सकते हैं, पर PNG जनरेशन के लिए API की ज़रूरत होती है। ऑफ़लाइन जनरेशन जोड़ने का विकल्प उपलब्ध है।"
      }
    },
    {
      "@type": "Question",
      "name": "क्या मेरी जानकारी सुरक्षित रहती है?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "API के माध्यम से इमेज बनाते समय डेटा सर्वर पर जा सकता है; संवेदनशील जानकारी साझा न करें जब तक API पॉलिसी न पढ़ लें।"
      }
    }
  ]
}</script>

  <script>
    const elData = document.getElementById('data');
    const elSize = document.getElementById('size');
    const elFg = document.getElementById('fg');
    const elBg = document.getElementById('bg');
    const elEcc = document.getElementById('ecc');
    const btnGen = document.getElementById('generate');
    const btnClear = document.getElementById('clear');
    const btnExample = document.getElementById('example');
    const img = document.getElementById('qrImg');
    const status = document.getElementById('status');
    const downloadBtn = document.getElementById('download');
    const copyLinkBtn = document.getElementById('copyLink');
    const details = document.getElementById('details');

    function buildQrUrl(text, size, fg, bg, ecc){
      // Using goqr / qrserver API: https://goqr.me/api/doc/create-qr-code/
      // api.qrserver.com accepts color as R,G,B and bgcolor as R,G,B in hex form allowed too.
      const base = 'https://api.qrserver.com/v1/create-qr-code/';
      const params = new URLSearchParams();
      params.set('data', text);
      params.set('size', size + 'x' + size);
      params.set('ecc', ecc);
      // color and bgcolor accept hex without # in this API
      params.set('color', fg.replace('#',''));
      params.set('bgcolor', bg.replace('#',''));
      // return full URL
      return base + '?' + params.toString();
    }

    async function generate(){
      const text = elData.value.trim();
      if(!text){
        alert('Please enter text or a URL to encode.');
        return;
      }
      const size = elSize.value;
      const fg = elFg.value;
      const bg = elBg.value;
      const ecc = elEcc.value;
      status.innerText = 'Generating...';
      const url = buildQrUrl(text, size, fg, bg, ecc);

      // Set preview image src to API url (browser will fetch it)
      img.src = url;
      img.onload = ()=>{
        status.innerText = 'Generated';
        downloadBtn.disabled = false;
        copyLinkBtn.disabled = false;
        details.innerText = `${size}×${size}px • ECC ${ecc} • fg ${fg} • bg ${bg}`;
        // set download href using a fetch to convert to blob and create object URL
        prepareDownload(url);
      }
      img.onerror = (e)=>{
        status.innerText = 'Failed to generate. Check your internet connection.';
        downloadBtn.disabled = true;
        copyLinkBtn.disabled = true;
      }
    }

    async function prepareDownload(url){
      try{
        status.innerText = 'Preparing download...';
        const resp = await fetch(url);
        if(!resp.ok) throw new Error('Network response not ok');
        const blob = await resp.blob();
        const blobUrl = URL.createObjectURL(blob);
        downloadBtn.disabled = false;
        downloadBtn.onclick = ()=>{
          const a = document.createElement('a');
          a.href = blobUrl;
          a.download = 'qr-code.png';
          document.body.appendChild(a);
          a.click();
          a.remove();
        }
        copyLinkBtn.onclick = async ()=>{
          await navigator.clipboard.writeText(url);
          copyLinkBtn.innerText = 'Copied!';
          setTimeout(()=>copyLinkBtn.innerText = 'Copy Image URL',1200);
        }
        status.innerText = 'Ready to download';
      }catch(err){
        console.error(err);
        status.innerText = 'Error preparing download.';
        downloadBtn.disabled = true;
      }
    }

    btnGen.addEventListener('click', generate);
    btnClear.addEventListener('click', ()=>{
      elData.value = '';
      img.src = '';
      details.innerText = '';
      status.innerText = 'Cleared';
      downloadBtn.disabled = true;
      copyLinkBtn.disabled = true;
    });
    btnExample.addEventListener('click', ()=>{
      elData.value = 'https://storedropship.in/automation-templates/';
    });

    // generate on Ctrl+Enter inside textarea
    elData.addEventListener('keydown', (e)=>{
      if(e.ctrlKey && e.key === 'Enter'){
        generate();
      }
    });

    // initial generate
    //generate();
  </script>
</body>
</html>
