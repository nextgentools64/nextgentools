<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Spell & Grammar Checker — Storedropship Tool</title>
  <meta name="description" content="Spell and basic grammar checker. Offline demo highlights misspelled words, suggests corrections, and includes API-ready hooks for Grammarly-like services." />
  <style>
    :root{--bg:#f7fbff;--card:#fff;--muted:#6b7280;--accent:#0ea5a4}
    *{box-sizing:border-box;font-family:Segoe UI,Roboto,Arial,sans-serif}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#eef6ff);padding:28px;color:#0f172a}
    .wrap{max-width:980px;margin:0 auto}
    .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 8px 26px rgba(10,20,40,0.06);margin-bottom:16px}
    h1{margin:0 0 6px;font-size:22px}
    p.lead{margin:0 0 12px;color:var(--muted)}
    textarea{width:100%;min-height:180px;border:1px solid #e6eef6;border-radius:8px;padding:12px;font-family:inherit;font-size:15px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .controls{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
    button{padding:10px 12px;border-radius:8px;border:none;background:var(--accent);color:white;cursor:pointer}
    button.alt{background:#e6eef6;color:#0b5394}
    .out{margin-top:12px;padding:12px;border-radius:8px;background:#f8fafc;border:1px dashed #e5e7eb}
    .suggest{color:#92400e;background:#fff7ed;padding:6px;border-radius:6px;margin-top:6px}
    mark.miss{background:#fee2e2;color:#7f1d1d;padding:2px 4px;border-radius:4px}
    mark.sug{background:#eef2ff;color:#013a63;padding:2px 4px;border-radius:4px}
    .meta{font-size:13px;color:var(--muted);margin-top:10px}
    @media(max-width:760px){.row{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Spell & Grammar Checker</h1>
      <p class="lead">Check spelling and simple grammar issues. Offline demo highlights misspellings, suggests corrections, and points out common grammar slips. Designed to be API-ready for integrating Grammarly or other services later.</p>

      <label for="input">Paste your text</label>
      <textarea id="input" placeholder="Type or paste text here... e.g. This is an exampel of speling mistake."></textarea>

      <div class="controls">
        <button id="check">Check Spelling & Grammar</button>
        <button id="suggest" class="alt">Show Suggestions Only</button>
        <button id="clear" class="alt">Clear</button>
        <button id="copy" class="alt">Copy Result</button>
        <button id="download" class="alt">Download .txt</button>
      </div>

      <div id="result" class="out">Results will appear here after you run the check.</div>
      <div class="meta">Tip: This is an offline/local checker for quick review. For production-quality grammar checking, integrate a professional API (placeholders available in the script).</div>
    </div>

    <div class="card">
      <h2 style="font-size:18px;margin-bottom:8px">Description</h2>
      <p style="margin:0;color:#374151;line-height:1.6">This Spell & Grammar Checker is created to help writers, bloggers, students and professionals quickly spot obvious spelling mistakes and simple grammar issues (like repeated words, capitalization, and double spaces). It works fully in the browser and includes a suggestion engine based on a built-in wordlist and Levenshtein distance to propose close matches. The code structure includes clear hooks for later integration with services like Grammarly or LanguageTool.</p>
      <ul style="margin-top:12px;color:#374151">
        <li><b>Features:</b> Misspelling detection, top-5 suggestions, repeated-word detection, sentence capitalization check, copy/download result.</li>
        <li><b>Extendable:</b> Add more words to the <code>dictionary</code> array or plug an external API inside <code>checkWithAPI()</code>.</li>
        <li><b>Use cases:</b> Quick drafts, blog posts, email checks, educational use, pre-submission review.</li>
      </ul>
    </div>
  </div>

  <script>
    // Small common English dictionary (extendable). For production, replace with a larger list or API.
    const dictionary = (function(){
      // A compact list of common English words. Add more words as needed.
      const words = `the,be,to,of,and,a,in,that,it,is,was,I,for,on,you,he,with,as,have,do,at,this,but,his,by,from,they,we,say,her,she,or,an,will,my,one,all,would,there,their,what,so,up,out,if,about,who,get,which,go,me,when,make,can,like,time,no,just,him,know,take,people,into,year,your,good,some,could,them,see,other,than,then,now,look,only,come,its,over,think,also,back,after,use,two,how,our,work,first,well,way,even,new,want,because,any,these,give,day,most,us`;
      return new Set(words.split(',').map(w=>w.trim().toLowerCase()));
    })();

    const input = document.getElementById('input');
    const checkBtn = document.getElementById('check');
    const suggestBtn = document.getElementById('suggest');
    const clearBtn = document.getElementById('clear');
    const copyBtn = document.getElementById('copy');
    const downloadBtn = document.getElementById('download');
    const resultEl = document.getElementById('result');

    function tokenize(text){
      return text.split(/(\s+|[^A-Za-z'-]+)/).filter(Boolean);
    }

    function isWord(token){
      return /^[A-Za-z'-]+$/.test(token);
    }

    function levenshtein(a,b){
      if(a===b) return 0;
      const m=a.length,n=b.length; let dp = Array(n+1).fill(0).map((_,j)=>j);
      for(let i=1;i<=m;i++){ let prev = i; for(let j=1;j<=n;j++){ const cur = dp[j]; const cost = a[i-1]===b[j-1]?0:1; dp[j] = Math.min(dp[j]+1, prev+1, dp[j-1]+cost); prev = cur; } }
      return dp[n];
    }

    function topSuggestions(word, limit=5){
      const w = word.toLowerCase();
      // Build candidate list from dictionary (could be optimized)
      const candidates = [];
      dictionary.forEach(d => {
        const dist = levenshtein(w, d);
        if(dist <= Math.max(1, Math.floor(w.length/2))) candidates.push({d,dist});
      });
      candidates.sort((a,b)=>a.dist - b.dist);
      return candidates.slice(0,limit).map(c=>c.d);
    }

    function analyzeText(text){
      const tokens = tokenize(text);
      let miss = [];
      let outHtml = '';
      let prevWord = null;
      const repeated = [];
      for(const t of tokens){
        if(isWord(t)){
          const low = t.toLowerCase();
          if(!dictionary.has(low)){
            miss.push({word:t});
            outHtml += `<mark class="miss">${t}</mark>`;
          } else {
            outHtml += t;
          }
          if(prevWord && prevWord.toLowerCase() === t.toLowerCase()){
            repeated.push(t);
            outHtml += `<span class="suggest">(repeated)</span>`;
          }
          prevWord = t;
        } else {
          outHtml += t.replace(/</g,'&lt;').replace(/>/g,'&gt;');
          if(/\s{2,}/.test(t)){
            // nothing special here, handled later
          }
          if(/[.!?]\s*[A-Za-z]/.test(t)){
            // basic sentence boundary detection - handled in capitalization check
          }
        }
      }

      // Capitalization check for sentence starts
      const sentences = text.match(/[^.!?]+[.!?]*/g) || [];
      const capIssues = [];
      sentences.forEach(s => {
        const trimmed = s.trim();
        if(trimmed.length>0){
          const firstChar = trimmed[0];
          if(/[a-z]/.test(firstChar)){
            capIssues.push(trimmed.slice(0,40));
          }
        }
      });

      return {html: outHtml, miss, repeated, capIssues};
    }

    function runCheck(){
      const text = input.value;
      if(!text.trim()){ resultEl.textContent = 'Paste some text to check.'; return; }
      const res = analyzeText(text);
      let html = '';
      if(res.miss.length===0 && res.repeated.length===0 && res.capIssues.length===0){
        html = '<b>No obvious spelling or simple grammar issues found (offline check).</b>';
      } else {
        html += `<b>Offline results:</b><br>`;
        if(res.miss.length>0){
          html += `<div><b>Possible misspellings (${res.miss.length}):</b></div>`;
          res.miss.forEach(m => {
            const sugs = topSuggestions(m.word);
            html += `<div style="margin-top:6px"><mark class=\"miss\">${m.word}</mark> → Suggestions: ${sugs.map(s=>`<mark class=\"sug\">${s}</mark>`).join(' ') || '<i>no suggestion</i>'}</div>`;
          });
        }
        if(res.repeated.length>0){
          html += `<div style="margin-top:8px"><b>Repeated words:</b> ${Array.from(new Set(res.repeated)).join(', ')}</div>`;
        }
        if(res.capIssues.length>0){
          html += `<div style="margin-top:8px"><b>Sentence start capitalization issues (sample):</b><ul>`;
          res.capIssues.forEach(s => { html += `<li>${s}</li>`; });
          html += `</ul></div>`;
        }
      }
      // Show highlighted version below
      html += `<div style="margin-top:12px"><b>Highlighted text:</b><div style="margin-top:8px;padding:10px;border-radius:8px;background:#fff">${res.html}</div></div>`;
      resultEl.innerHTML = html;
    }

    function showSuggestionsOnly(){
      const text = input.value; if(!text.trim()){ resultEl.textContent='Paste some text to get suggestions.'; return; }
      const tokens = tokenize(text).filter(isWord);
      const uniq = Array.from(new Set(tokens.map(t=>t.toLowerCase())));
      let out = '<b>Suggestions (unique words):</b><br>';
      uniq.forEach(w => { if(!dictionary.has(w)) out += `<div><mark class="miss">${w}</mark> → ${topSuggestions(w).map(s=>`<mark class=\"sug\">${s}</mark>`).join(' ') || '<i>no suggestion</i>'}</div>`; });
      resultEl.innerHTML = out;
    }

    checkBtn.addEventListener('click', runCheck);
    suggestBtn.addEventListener('click', showSuggestionsOnly);
    clearBtn.addEventListener('click', ()=>{ input.value=''; resultEl.textContent='Results will appear here after you run the check.'; });

    copyBtn.addEventListener('click', async ()=>{
      try{ await navigator.clipboard.writeText(resultEl.innerText || resultEl.textContent); copyBtn.textContent='Copied'; setTimeout(()=>copyBtn.textContent='Copy Result',1000);}catch(e){alert('Clipboard copy failed — allow clipboard access.');}
    });

    downloadBtn.addEventListener('click', ()=>{
      const txt = input.value || '';
      const blob = new Blob([txt], {type:'text/plain'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'text.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });

    // Placeholder function: integrate external API (Grammarly, LanguageTool, etc.)
    async function checkWithAPI(text){
      // Example placeholder — when you have API keys, call them here and merge results with analyzeText()
      // return fetch('https://api.example.com/check', {method:'POST', body: JSON.stringify({text}), headers:{'Content-Type':'application/json','Authorization':'Bearer TOKEN'}}).then(r=>r.json());
      return null;
    }

  </script>
</body>
</html>
