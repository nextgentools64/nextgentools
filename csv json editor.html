<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>CSV JSON Editor — Storedropship Tool</title>
<meta name="description" content="Edit, convert and validate CSV and JSON data with an online editor. Supports import, export, syntax highlighting, validation, and easy copy/download of data." />
<meta name="keywords" content="CSV editor, JSON editor, convert CSV to JSON, convert JSON to CSV, data editor, online CSV JSON tool" />
<style>
  :root{--bg:#f9fafb;--card:#fff;--muted:#6b7280;--accent:#0ea5a4}
  *{box-sizing:border-box;font-family:Inter,Segoe UI,Roboto,Arial,sans-serif}
  body{margin:0;padding:20px;background:linear-gradient(180deg,var(--bg),#eef2ff);color:#111827}
  .wrap{max-width:960px;margin:0 auto}
  .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,0.05);margin-bottom:14px}
  h1{margin-bottom:6px;font-size:20px}
  p.lead{margin:0 0 12px;color:var(--muted)}
  textarea{width:100%;height:200px;padding:10px;border-radius:8px;border:1px solid #e6eef6;font-size:14px;margin-top:8px;resize:vertical}
  .controls{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
  button.primary{background:var(--accent);color:#fff;border:none;padding:10px;border-radius:8px;cursor:pointer}
  button.alt{background:#fff;border:1px solid #e6eef6;color:#0b5394;padding:10px;border-radius:8px}
  pre{background:#f8fafc;padding:12px;border-radius:8px;border:1px solid #e6e9ef;overflow:auto;max-height:320px;white-space:pre-wrap;word-wrap:break-word}
  .meta{font-size:13px;color:var(--muted);margin-top:6px}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>CSV JSON Editor</h1>
    <p class="lead">Edit, convert, validate, and view CSV and JSON data. Import CSV or JSON, convert between formats, validate structure, copy, or download for use in projects.</p>

    <label for="dataInput">Input CSV / JSON</label>
    <textarea id="dataInput" placeholder="Paste your CSV or JSON data here..."></textarea>

    <div class="controls">
      <button class="primary" id="toJson">Convert CSV → JSON</button>
      <button class="primary" id="toCsv">Convert JSON → CSV</button>
      <button class="alt" id="validate">Validate JSON</button>
      <button class="alt" id="copy">Copy Output</button>
      <button class="alt" id="download">Download</button>
      <button class="alt" id="clear">Clear</button>
    </div>

    <label style="margin-top:12px">Output</label>
    <pre id="output">Output will appear here...</pre>
    <div class="meta">Tip: CSV must have headers. JSON should be an array of objects for correct CSV conversion.</div>
  </div>

  <div class="card">
    <h2>Description</h2>
    <p style="margin:0;color:#374151;line-height:1.6">This CSV JSON Editor is a browser-based tool for developers, analysts, and content managers who need quick editing and format conversion. Features include:</p>
    <ul style="margin-top:6px;color:#374151">
      <li>Convert CSV to JSON and JSON to CSV.</li>
      <li>Validate JSON structure to prevent errors.</li>
      <li>Copy output to clipboard and download as .csv or .json.</li>
      <li>Simple, lightweight, and fully offline-capable.</li>
    </ul>
  </div>
</div>

<script>
  const dataInput = document.getElementById('dataInput');
  const output = document.getElementById('output');
  const toJson = document.getElementById('toJson');
  const toCsv = document.getElementById('toCsv');
  const validateBtn = document.getElementById('validate');
  const copyBtn = document.getElementById('copy');
  const downloadBtn = document.getElementById('download');
  const clearBtn = document.getElementById('clear');

  function parseCSV(text){
    const lines = text.trim().split('\n');
    const headers = lines[0].split(',');
    return lines.slice(1).map(line => {
      const obj = {};
      const values = line.split(',');
      headers.forEach((h,i)=>obj[h.trim()]=values[i]?.trim()||'');
      return obj;
    });
  }

  function toCSV(jsonArr){
    if(!Array.isArray(jsonArr) || !jsonArr.length) return '';
    const headers = Object.keys(jsonArr[0]);
    const lines = [headers.join(',')];
    jsonArr.forEach(obj=>{
      lines.push(headers.map(h=>obj[h]).join(','));
    });
    return lines.join('\n');
  }

  toJson.addEventListener('click', ()=>{
    try{
      const arr = parseCSV(dataInput.value);
      output.textContent = JSON.stringify(arr,null,2);
    }catch(e){
      output.textContent = 'Error parsing CSV';
    }
  });

  toCsv.addEventListener('click', ()=>{
    try{
      const arr = JSON.parse(dataInput.value);
      output.textContent = toCSV(arr);
    }catch(e){
      output.textContent = 'Error parsing JSON';
    }
  });

  validateBtn.addEventListener('click', ()=>{
    try{
      JSON.parse(dataInput.value);
      output.textContent = 'Valid JSON ✅';
    }catch(e){
      output.textContent = 'Invalid JSON ❌ '+e.message;
    }
  });

  copyBtn.addEventListener('click', async ()=>{
    try{ await navigator.clipboard.writeText(output.textContent); alert('Copied!'); }
    catch(e){ alert('Copy failed');}
  });

  downloadBtn.addEventListener('click', ()=>{
    const text = output.textContent;
    if(!text) return alert('Nothing to download');
    const isJson = text.trim().startsWith('[') || text.trim().startsWith('{');
    const blob = new Blob([text], {type: isJson?'application/json':'text/csv'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = isJson?'data.json':'data.csv'; a.click(); URL.revokeObjectURL(url);
  });

  clearBtn.addEventListener('click', ()=>{dataInput.value=''; output.textContent='';});
</script>
</body>
</html>
